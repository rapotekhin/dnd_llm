# Between the Rolls

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∏–≥—Ä—ã –≤ Dungeons & Dragons —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —è–∑—ã–∫–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π (LLM) –∫–∞–∫ ChatGPT.

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ Streamlit –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è  
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤:
  - **OpenAI** (GPT-4, GPT-4o-mini)
  - **OpenRouter** (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –º–æ–¥–µ–ª–∏: Mistral, Qwen3, DeepSeek V3, Gemma 3 –∏ –¥—Ä.)
  - **Grok** (X.AI API)
  - **LM Studio** (–ª–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏)
  - **VLLM** (–ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä)
  - **Ollama** (–ª–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏)
- –í–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è RAG (Retrieval Augmented Generation)
- SQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è:
  - –ö–∞—Ä—Ç–æ—á–µ–∫ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
  - –ò–Ω–≤–µ–Ω—Ç–∞—Ä—è
  - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–æ—é–∑–Ω–∏–∫–∞—Ö –∏ –≤—Ä–∞–≥–∞—Ö
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è Python –∫–æ–¥–∞ –¥–ª—è –±—Ä–æ—Å–∫–æ–≤ –∫—É–±–∏–∫–æ–≤ –∏ –¥—Ä—É–≥–∏—Ö –∏–≥—Ä–æ–≤—ã—Ö –º–µ—Ö–∞–Ω–∏–∫

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```
git clone https://github.com/yourusername/dnd_llm.git
cd dnd_llm
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```
pip install -r requirements.txt
git clone https://github.com/rapotekhin/dnd-5e-core
git clone https://github.com/rapotekhin/DnD-5th-Edition-API.git

cd dnd-5e-core
pip install -e .

cd ../DnD-5th-Edition-API
./install.bat
```

3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –Ω–∞ –æ—Å–Ω–æ–≤–µ .env.example:
```
cp .env.example .env
```

4. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª .env, –¥–æ–±–∞–≤–∏–≤ API –∫–ª—é—á–∏ –¥–ª—è –Ω—É–∂–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤:

5. –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∏–∑ —Ä–µ–ø—ã
```
cd ./DnD-5th-Edition-API
python main.py                    # Console version
python main_ncurses.py            # Ncurses version
python dungeon_menu_pygame.py     # Pygame version
python dungeon_tk.py              # Tkinter version
python pyQTApp/wizardry.py        # PyQt5 version
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# OpenAI (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è OpenAI API)
OPENAI_API_KEY=your_openai_api_key

# OpenRouter (–¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π)
OPENROUTER_API_KEY=your_openrouter_api_key
OPENROUTER_API_BASE=https://openrouter.ai/api/v1

# Grok/X.AI
GROK_API_KEY=your_grok_api_key
GROK_API_BASE=https://api.x.ai/v1

# –õ–æ–∫–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
LMSTUDIO_API_BASE=http://localhost:1234/api/v0
VLLM_API_BASE=http://localhost:8999/v1
OLLAMA_API_BASE=http://localhost:11434

# Langfuse (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è)
LANGFUSE_PUBLIC_KEY=your_langfuse_public_key
LANGFUSE_SECRET_KEY=your_langfuse_secret_key
LANGFUSE_HOST=https://cloud.langfuse.com
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í–∞–º –Ω—É–∂–µ–Ω API –∫–ª—é—á —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.

5. –°–æ–∑–¥–∞–π—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö:
```
mkdir -p data
```

## –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```
streamlit run app/main.py
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≤—ã–±–æ—Ä—É –º–æ–¥–µ–ª–µ–π

### –î–ª—è –Ω–æ–≤–∏—á–∫–æ–≤ (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã)
- **OpenRouter + Mistral Small 3.2 24B** - –æ—Ç–ª–∏—á–Ω—ã–π –±–∞–ª–∞–Ω—Å –∫–∞—á–µ—Å—Ç–≤–∞ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- **OpenRouter + Gemma 3 27B** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–≥–∏—Ö —è–∑—ã–∫–æ–≤, –≤–∫–ª—é—á–∞—è —Ä—É—Å—Å–∫–∏–π
- **OpenRouter + DeepSeek V3** - –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞

### –î–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
- **OpenAI GPT-4o** - –Ω–∞–∏–≤—ã—Å—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ, –Ω–æ –ø–ª–∞—Ç–Ω–∞—è
- **Grok** - —Ö–æ—Ä–æ—à–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ GPT-4 —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º —Å—Ç–∏–ª–µ–º
- **OpenRouter + Qwen3 235B** - –º–æ—â–Ω–∞—è –º–æ–¥–µ–ª—å —Å —Ä–µ–∂–∏–º–æ–º —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–π

### –î–ª—è —Ä–æ–ª–µ–≤—ã—Ö –∏–≥—Ä
- **OpenRouter + QwQ 32B RpR** - —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è —Ä–æ–ª–µ–≤—ã—Ö –∏–≥—Ä
- **OpenRouter + Dolphin Mistral** - –Ω–µ—Ü–µ–Ω–∑—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–ª—è —Ç–≤–æ—Ä—á–µ—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### –õ–æ–∫–∞–ª—å–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã (–¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏)
- **LM Studio** - –ø—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
- **Ollama** - –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ open-source –º–æ–¥–µ–ª—è–º
- **VLLM** - –≤—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –±–æ–ª—å—à–∏—Ö –º–æ–¥–µ–ª–µ–π

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ Function Calling

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –∏ –º–æ–¥–µ–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç **function calling** (–≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π) –¥–ª—è:
- üé≤ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –±—Ä–æ—Å–∫–æ–≤ –∫—É–±–∏–∫–æ–≤  
- üêç –í—ã–ø–æ–ª–Ω–µ–Ω–∏—è Python –∫–æ–¥–∞
- üóÑÔ∏è –ó–∞–ø—Ä–æ—Å–æ–≤ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π 
- üîç –ü–æ–∏—Å–∫–∞ –≤ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º:
- ‚úÖ **OpenAI** - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π
- ‚ö†Ô∏è **OpenRouter** - –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏ (–µ—Å—Ç—å fallback)
- ‚úÖ **Grok** - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- ‚ö†Ô∏è **LM Studio/VLLM/Ollama** - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –º–æ–¥–µ–ª—å –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç function calling, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º, –≥–¥–µ –ò–ò –æ–ø–∏—Å—ã–≤–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è —Å–ª–æ–≤–∞–º–∏ –≤–º–µ—Å—Ç–æ –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

- `app/` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  - `api/` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ LLM API
  - `database/` - –∫–æ–¥ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å SQL –∏ –≤–µ–∫—Ç–æ—Ä–Ω—ã–º–∏ –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
  - `components/` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Streamlit UI
  - `utils/` - –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
  - `static/` - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, CSS –∏ —Ç.–¥.)
- `data/` - –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –∏ —Ñ–∞–π–ª–æ–≤

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT 